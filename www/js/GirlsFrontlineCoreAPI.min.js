let GirlsFrontlineCoreAPI=function(){const e=["hg","smg","rf","ar","mg","sg"];let t=!1,o="",l="",n=[];$("#tdoll_selection").on("change",(function(){let e=this.value;""!==e&&c(parseInt(e))})),$("#btns_doll_type").children().on("click",(function(){let e=$(this).data("type");$(this).siblings().addBack().removeClass("active"),$(this).addClass("active"),a(e.toLowerCase()),r()})),$("#btnFloat_favorite").on("click",(function(){let e=$("#tdoll_selection").val();null!==e?f(parseInt(e)):console.error("Favorite Button: "+e+" is NaN!")})),$("#tdoll_selection_favorite").on("change",(function(){let e=this.value;""!==e&&c(parseInt(e),!0)})),$("#btns_favorite").children().on("click",(function(){let e=$(this).data("type");$(this).siblings().addBack().removeClass("active"),$(this).addClass("active"),a(e.toLowerCase(),!0),r(!0)})),$("#btnFloat_Unfavorite").on("click",(function(){let e=$("#tdoll_selection_favorite").val();null!==e?u(parseInt(e)):console.error("UnFavorite Button: "+e+" is NaN!")}));let i=function(){$.getScript("https://unpkg.com/girlsfrontline-core/umd/gfcore.min.js").done((function(e,o,l){console.log("GirlsFrontlineCore-API loaded successfully: ",l.status+" - "+o),t=!0,console.log("Loaded - done: loaded_dynamically = ",t),$("#GFLC_API_Loaded").html("<b>GFL-Core API: </b>Loaded"),NetworkState.close_modal(),_init()})).fail((function(e,o,l){console.error("GirlsFrontlineCore-Api failed to load: ",e.status+" - "+l),t=!1,console.log("Loaded - fail: loaded_dynamically = ",t),$("#GFLC_API_Loaded").html("<b>GFL-Core API: </b> "+l)}))},a=function(t="hg",i=!1){try{if(e.includes(t)){let e=[];gfcore.dolls.forEach((function(a){switch(i){case!0:l=t,a.type===t&&n.includes(a.id)&&e.push([a.id,a.codename]);break;default:o=t,a.type===t&&e.push([a.id,a.codename])}})),s(e,i)}}catch(e){console.error("get_dolls_by_type: Failed")}},s=function(e,t=!1){let o="";switch(t){case!0:o="#tdoll_selection_favorite";break;default:o="#tdoll_selection"}$(o).empty().append("<option value='' disabled selected>Choose a T-Doll</option>"),e.forEach((function(e){$(o).append("<option value='"+e[0]+"'>"+e[1]+"</option>")})),$("select").formSelect()},c=function(e,t=!1){let o=gfcore.dolls.find((({id:t})=>t===e));BuildTimeOBJ=new Date(1e3*o.buildTime),hours=BuildTimeOBJ.getUTCHours(),minutes=BuildTimeOBJ.getUTCMinutes(),seconds=BuildTimeOBJ.getSeconds(),BuildTimeString=hours.toString().padStart(2,"0")+":"+minutes.toString().padStart(2,"0")+":"+seconds.toString().padStart(2,"0");let l=`\n            <b>Name: </b>${o.codename}<br>\n            <b>ID: </b>${o.id}<br>\n            <b>Type: </b>${o.type.toUpperCase()}<br>\n            <b>Rank: </b>${"&#9734;".repeat(o.rank)}<br>\n            <b>BuildTime: </b>${BuildTimeString}<br>\n            <b>Skins: </b>${o.skins.length}\n        `;switch(t){case!0:$("#Doll_Data_favorite").html(l);break;default:$("#Doll_Data").html(l)}},r=function(e=!1){let t="\n            <b>Name: </b>No Data<br>\n            <b>ID: </b>No Data<br>\n            <b>Type: </b>No Data<br>\n            <b>Rank: </b>No Data<br>\n            <b>BuildTime: </b>No Data<br>\n            <b>Skins: </b>No Data\n        ";switch(e){case!0:$("#Doll_Data_favorite").html(t);break;default:$("#Doll_Data").html(t)}},d=function(){console.log("Save Favorited T-Dolls to Local Storage"),localStorage.setItem("favorite_doll_ids",JSON.stringify(n))},f=function(e){n.includes(e)?M.toast({html:"T-Doll already Favorited",displayLength:2e3,classes:"grey_gfl"}):(n.push(e),d(),a(l,!0),M.toast({html:"T-Doll Favorited",displayLength:2e3,classes:"grey_gfl"}))},u=function(e){if(confirm("Remove this T-Doll?")){for(let t=0;t<n.length;t++)n[t]===e&&n.splice(t,1);d(),a(l,!0),r(!0),M.toast({html:"T-Doll removed from Favorites",displayLength:2e3,classes:"grey_gfl"})}};return{init:function(){let e=localStorage.getItem("favorite_doll_ids");null!==e&&(n=[],n=JSON.parse(e)),a(),a(void 0,!0)},get_loaded_dynamically:function(){return i(),t},example:function(){const e=gfcore.dolls.find((({codename:e})=>"G36"===e));e.level=70,e.dummyLink=3,e.favor=50,console.log("Doll G36: ",e.stats),e.skins.forEach((function(e){console.log(e.name)}));const t=gfcore.equips.find((({buildTime:e})=>2100===e));console.log("Equipment BT = 2100: ",t.stats);const o=gfcore.fairies.find((({codename:e})=>"DJMAXSEHRA"===e));o.skillLevel=7,console.log("Fairy DJMAXSEHRA: ",o.skill),gfcore.dolls.forEach((function(e){console.log(e.type+" - "+e.codename,e)}))},get_dolls_by_type:a}}();