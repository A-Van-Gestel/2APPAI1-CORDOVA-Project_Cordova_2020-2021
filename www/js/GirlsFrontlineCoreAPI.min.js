let GirlsFrontlineCoreAPI=function(){const t=["hg","smg","rf","ar","mg","sg"];let e=$("#tdoll_selection"),n=$("#btns_doll_type"),l=$("#btnFloat_favorite"),o=$("#tdoll_selection_favorite"),a=$("#btns_favorite"),i=$("#btnFloat_Unfavorite"),d=$("#tdoll_BuildTime"),s=$("#tdoll_selection_BuildTime"),r=$("#Doll_Data_favorite"),c=$("#Doll_Data_BuildTime"),b=$("#Doll_Data"),u="",f="",h=[];e.on("change",(function(){let t=this.value;""!==t&&p(parseInt(t))})),n.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),g(e.toLowerCase()),v()})),l.on("click",(function(){let t=e.val();null!==t?y(parseInt(t)):(console.error("Favorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Favorite!",displayLength:2e3,classes:"red accent-4"}))})),o.on("change",(function(){let t=this.value;""!==t&&p(parseInt(t),!0)})),a.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),g(e.toLowerCase(),!0),v(!0)})),i.on("click",(function(){let t=o.val();null!==t?D(parseInt(t)):console.error("UnFavorite Button: "+t+" is NaN!")})),d.on("click",(function(){MaterialDateTimePicker.showTimePicker()})),s.on("change",(function(){let t=this.value;""!==t&&p(parseInt(t),void 0,!0)}));let g=function(e="hg",n=!1){try{if(t.includes(e)){let t=[];gfcore.dolls.forEach((function(l){switch(n){case!0:f=e,l.type===e&&h.includes(l.id)&&t.push([l.id,l.codename]);break;default:u=e,l.type===e&&t.push([l.id,l.codename])}})),m(t,n)}}catch(t){console.error("get_dolls_by_type: Failed:",t)}},m=function(t,n=!1,l=!1){let a=void 0;a=!0===n?o:!0===l?s:e,a.empty().append("<option value='' disabled selected>Choose a T-Doll</option>"),t.forEach((function(t){a.append("<option value='"+t[0]+"'>"+t[1]+"</option>")})),$("select").formSelect()},p=function(t,e=!1,n=!1){let l=gfcore.dolls.find((({id:e})=>e===t));console.log(l.codename+"_Data = ",l);let o,a=l.rank;o=7===a?"&#10029;":"&#9733;".repeat(a);let i=new Date(1e3*l.buildTime),d=i.getUTCHours(),s=i.getUTCMinutes(),u=i.getSeconds(),f=d.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+u.toString().padStart(2,"0"),h=l.stats.armor;void 0===h&&(h=0);let g=`\n            <b>Name: </b>${l.codename}<br>\n            <b>ID: </b>${l.id}<br>\n            <b>Type: </b>${l.type.toUpperCase()}<br>\n            <b>Rank: </b>${o}<br>\n            <b>BuildTime: </b>${f}<br>\n            <b>Skins: </b>${l.skins.length}\n            <br>\n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>HP: </b>${l.stats.hp}</td>\n                <td><b>DMG: </b>${l.stats.pow}</td>\n                <td><b>ACC: </b>${l.stats.hit}</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>${l.stats.dodge}</td>\n                <td><b>MOBILITY: </b>${l.stats.speed}</td>\n                <td><b>ROF: </b>${l.stats.rate}</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>${l.stats.armorPiercing}</td>\n                <td><b>CRIT: </b>${l.stats.criticalPercent}</td>\n                <td><b>ARMOR: </b>${h}</td>\n              </tr>\n            </table>\n        `;!0===e?r.html(g):!0===n?c.html(g):b.html(g)},v=function(t=!1,e=!1){let n='\n            <div>\n                <b>Name: </b>No Data<br>\n                <b>ID: </b>No Data<br>\n                <b>Type: </b>No Data<br>\n                <b>Rank: </b>No Data<br>\n                <b>BuildTime: </b>No Data<br>\n                <b>Skins: </b>No Data\n            </div>\n            <br>\n            \n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>HP: </b>0</td>\n                <td><b>DMG: </b>0</td>\n                <td><b>ACC: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>0</td>\n                <td><b>MOBILITY: </b>0</td>\n                <td><b>ROF: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>0</td>\n                <td><b>CRIT: </b>0</td>\n                <td><b>ARMOR: </b>0</td>\n              </tr>\n            </table>\n        ';!0===t?r.html(n):!0===e?c.html(n):b.html(n)},_=function(){console.log("Save Favorited T-Dolls to Local Storage"),localStorage.setItem("favorite_doll_ids",JSON.stringify(h))},y=function(t){h.includes(t)?M.toast({html:"T-Doll already Favorited",displayLength:2e3,classes:"grey_gfl"}):(h.push(t),_(),g(f,!0),M.toast({html:"T-Doll Favorited",displayLength:2e3,classes:"grey_gfl"}))},D=function(t){if(confirm("Remove this T-Doll?")){for(let e=0;e<h.length;e++)h[e]===t&&h.splice(e,1);_(),g(f,!0),v(!0),M.toast({html:"T-Doll removed from Favorites",displayLength:2e3,classes:"grey_gfl"})}};return{init:function(){let t=localStorage.getItem("favorite_doll_ids");null!==t&&(h=[],h=JSON.parse(t)),g(),g(void 0,!0),v(),v(!0,void 0),v(void 0,!0)},get_dolls_by_type:g,get_dolls_by_buildTime:function(t){try{let e=[];gfcore.dolls.forEach((function(n){n.buildTime===t&&n.id<2e4&&e.push([n.id,n.codename])})),m(e,void 0,!0)}catch(t){console.error("get_dolls_by_buildTime: Failed:",t)}},reset_html_doll_data:v,example:function(){const t=gfcore.dolls.find((({codename:t})=>"G36"===t));t.level=70,t.dummyLink=3,t.favor=50,console.log("Doll G36: ",t),console.log("Doll G36 Stats: ",t.stats)}}}();