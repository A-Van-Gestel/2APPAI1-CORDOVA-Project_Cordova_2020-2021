let GirlsFrontlineCoreAPI=function(){const t=["hg","smg","rf","ar","mg","sg"];let e=!1,l="",o="",n=[];$("#tdoll_selection").on("change",(function(){let t=this.value;""!==t&&s(parseInt(t))})),$("#btns_doll_type").children().on("click",(function(){let t=$(this).data("type");$(this).siblings().addBack().removeClass("active"),$(this).addClass("active"),i(t.toLowerCase()),r()})),$("#btnFloat_favorite").on("click",(function(){let t=$("#tdoll_selection").val();null!==t?b(parseInt(t)):console.error("Favorite Button: "+t+" is NaN!")})),$("#tdoll_selection_favorite").on("change",(function(){let t=this.value;""!==t&&s(parseInt(t),!0)})),$("#btns_favorite").children().on("click",(function(){let t=$(this).data("type");$(this).siblings().addBack().removeClass("active"),$(this).addClass("active"),i(t.toLowerCase(),!0),r(!0)})),$("#btnFloat_Unfavorite").on("click",(function(){let t=$("#tdoll_selection_favorite").val();null!==t?u(parseInt(t)):console.error("UnFavorite Button: "+t+" is NaN!")})),$("#tdoll_BuildTime").on("click",(function(){MaterialDateTimePicker.showTimePicker()})),$("#tdoll_selection_BuildTime").on("change",(function(){let t=this.value;""!==t&&s(parseInt(t),void 0,!0)}));let a=function(){$.getScript("https://unpkg.com/girlsfrontline-core/umd/gfcore.min.js").done((function(t,l,o){console.log("GirlsFrontlineCore-API loaded successfully: ",o.status+" - "+l),e=!0,console.log("Loaded - done: loaded_dynamically = ",e),$("#GFLC_API_Loaded").html("<b>GFL-Core API: </b>Loaded"),NetworkState.close_modal(),_init()})).fail((function(t,l,o){console.error("GirlsFrontlineCore-Api failed to load: ",t.status+" - "+o),e=!1,console.log("Loaded - fail: loaded_dynamically = ",e),$("#GFLC_API_Loaded").html("<b>GFL-Core API: </b> "+o)}))},i=function(e="hg",a=!1){try{if(t.includes(e)){let t=[];gfcore.dolls.forEach((function(i){switch(a){case!0:o=e,i.type===e&&n.includes(i.id)&&t.push([i.id,i.codename]);break;default:l=e,i.type===e&&t.push([i.id,i.codename])}})),d(t,a)}}catch(t){console.error("get_dolls_by_type: Failed:",t)}},d=function(t,e=!1,l=!1){let o="";o=!0===e?"#tdoll_selection_favorite":!0===l?"#tdoll_selection_BuildTime":"#tdoll_selection",$(o).empty().append("<option value='' disabled selected>Choose a T-Doll</option>"),t.forEach((function(t){$(o).append("<option value='"+t[0]+"'>"+t[1]+"</option>")})),$("select").formSelect()},s=function(t,e=!1,l=!1){let o=gfcore.dolls.find((({id:e})=>e===t));console.log(o.codename+"_Data = ",o);let n,a=o.rank;n=7===a?"&#10029;":"&#9733;".repeat(a);let i=new Date(1e3*o.buildTime),d=i.getUTCHours(),s=i.getUTCMinutes(),r=i.getSeconds(),c=d.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0"),b=o.stats.armor;void 0===b&&(b=0);let u=`\n            <b>Name: </b>${o.codename}<br>\n            <b>ID: </b>${o.id}<br>\n            <b>Type: </b>${o.type.toUpperCase()}<br>\n            <b>Rank: </b>${n}<br>\n            <b>BuildTime: </b>${c}<br>\n            <b>Skins: </b>${o.skins.length}\n            <br>\n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>HP: </b>${o.stats.hp}</td>\n                <td><b>DMG: </b>${o.stats.pow}</td>\n                <td><b>ACC: </b>${o.stats.hit}</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>${o.stats.dodge}</td>\n                <td><b>MOBILITY: </b>${o.stats.speed}</td>\n                <td><b>ROF: </b>${o.stats.rate}</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>${o.stats.armorPiercing}</td>\n                <td><b>CRIT: </b>${o.stats.criticalPercent}</td>\n                <td><b>ARMOR: </b>${b}</td>\n              </tr>\n            </table>\n        `;!0===e?$("#Doll_Data_favorite").html(u):!0===l?$("#Doll_Data_BuildTime").html(u):$("#Doll_Data").html(u)},r=function(t=!1,e=!1){let l='\n            <b>Name: </b>No Data<br>\n            <b>ID: </b>No Data<br>\n            <b>Type: </b>No Data<br>\n            <b>Rank: </b>No Data<br>\n            <b>BuildTime: </b>No Data<br>\n            <b>Skins: </b>No Data\n            <br>\n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>HP: </b>0</td>\n                <td><b>DMG: </b>0</td>\n                <td><b>ACC: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>0</td>\n                <td><b>MOBILITY: </b>0</td>\n                <td><b>ROF: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>0</td>\n                <td><b>CRIT: </b>0</td>\n                <td><b>ARMOR: </b>0</td>\n              </tr>\n            </table>\n        ';!0===t?$("#Doll_Data_favorite").html(l):!0===e?$("#Doll_Data_BuildTime").html(l):$("#Doll_Data").html(l)},c=function(){console.log("Save Favorited T-Dolls to Local Storage"),localStorage.setItem("favorite_doll_ids",JSON.stringify(n))},b=function(t){n.includes(t)?M.toast({html:"T-Doll already Favorited",displayLength:2e3,classes:"grey_gfl"}):(n.push(t),c(),i(o,!0),M.toast({html:"T-Doll Favorited",displayLength:2e3,classes:"grey_gfl"}))},u=function(t){if(confirm("Remove this T-Doll?")){for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e,1);c(),i(o,!0),r(!0),M.toast({html:"T-Doll removed from Favorites",displayLength:2e3,classes:"grey_gfl"})}};return{init:function(){let t=localStorage.getItem("favorite_doll_ids");null!==t&&(n=[],n=JSON.parse(t)),i(),i(void 0,!0),r(),r(!0,void 0),r(void 0,!0)},get_loaded_dynamically:function(){return a(),e},example:function(){const t=gfcore.dolls.find((({codename:t})=>"G36"===t));t.level=70,t.dummyLink=3,t.favor=50,console.log("Doll G36: ",t),console.log("Doll G36 Stats: ",t.stats)},get_dolls_by_type:i,get_dolls_by_buildTime:function(t){try{let e=[];gfcore.dolls.forEach((function(l){l.buildTime===t&&l.id<2e4&&e.push([l.id,l.codename])})),e.length>0&&d(e,void 0,!0)}catch(t){console.error("get_dolls_by_buildTime: Failed:",t)}},reset_html_doll_data:r}}();