let GirlsFrontlineCoreAPI=function(){const t=["hg","smg","rf","ar","mg","sg"],e={armor:"ARMOR",armorPiercing:"AP",criticalPercent:"CRIT",dodge:"EVA",hit:"ACC",hp:"HP",pow:"DMG",rate:"ROF",speed:"MOBILITY"};let n=[],l="",o="",a=$("#tabTDollData"),i=$("#tabBuildTime"),d=$("#tabFavorite"),s=a.find("#tdoll_selection"),r=a.find("#btns_doll_type"),c=a.find("#btnFloat_favorite"),b=d.find("#tdoll_selection_favorite"),f=d.find("#btns_favorite"),m=d.find("#btnFloat_Unfavorite"),p=i.find("#tdoll_BuildTime"),u=i.find("#tdoll_selection_BuildTime"),g=i.find("#btnFloat_favorite_buildTime"),h=a.find("#Doll_Data"),v=d.find("#Doll_Data_favorite"),_=i.find("#Doll_Data_BuildTime");s.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t))})),r.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),T(e.toLowerCase()),N()})),c.on("click",(function(){let t=s.val();null!==t?k(parseInt(t)):(console.error("Favorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Favorite!",displayLength:2e3,classes:"red accent-4"}))})),g.on("click",(function(){let t=u.val();null!==t?k(parseInt(t)):(console.error("Favorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Favorite!",displayLength:2e3,classes:"red accent-4"}))})),b.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t),!0)})),f.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),T(e.toLowerCase(),!0),N(!0)})),m.on("click",(function(){let t=b.val();null!==t?x(parseInt(t)):(console.error("UnFavorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Unfavorite!",displayLength:2e3,classes:"red accent-4"}))})),p.on("click",(function(){MaterialDateTimePicker.showTimePicker()})),u.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t),void 0,!0)}));let T=function(e="hg",a=!1){try{if(t.includes(e)){let t=[];gfcore.dolls.forEach((function(i){switch(a){case!0:o=e,i.type===e&&n.includes(i.id)&&t.push([i.id,i.codename]);break;default:l=e,i.type===e&&t.push([i.id,i.codename])}})),y(t,a)}}catch(t){console.error("get_dolls_by_type: Failed:",t)}},y=function(t,e=!1,n=!1){let l=void 0;l=!0===e?b:!0===n?u:s,l.empty().append("<option value='' disabled selected>Choose a T-Doll</option>"),t.forEach((function(t){l.append("<option value='"+t[0]+"'>"+t[1]+"</option>")})),$("select").formSelect()},D=function(t,n=!1,l=!1){let o,a=gfcore.dolls.find((({id:e})=>e===t)),i=a.rank;o=7===i?"&#10029;":"&#9733;".repeat(i);let d=a.mindupdate;d=void 0===d?"No":`\n             <table>\n              <tr>\n                <td><b>Mod 1: </b>\n                    <br>Cores: ${a.mindupdate[0].core}\n                    <br>Fragments: ${a.mindupdate[0].mempiece}</td>\n                <td><b>Mod 2: </b>\n                    <br>Cores: ${a.mindupdate[1].core}\n                    <br>Fragments: ${a.mindupdate[1].mempiece}</td>\n                <td><b>Mod 3: </b>\n                    <br>Cores: ${a.mindupdate[2].core}\n                    <br>Fragments: ${a.mindupdate[2].mempiece}</td>\n              </tr>\n            </table>\n        `;let s=new Date(1e3*(a.buildTime-3600)),r=MaterialDateTimePicker.dateTimetoString(s),c=a.stats.armor;void 0===c&&(c=0);let b=["","","","","","","","",""],f=a.effect.effectCenter;a.effect.effectPos.forEach((function(t){b[t-1]="buff"})),b[f-1]="standing",console.log("tiles_table",b);let m="",p=a.effect.gridEffect;for(let t in p){let n=t,l=p[t];m+=`<p style="margin: 0"><b>${e[n]}: </b>+${l}%</p>`}let u=`\n            <b>Name: </b>${a.codename}<br>\n            <b>ID: </b>${a.id}<br>\n            <b>Type: </b>${a.type.toUpperCase()}<br>\n            <b>Rank: </b>${o}<br>\n            <b>BuildTime: </b>${r}<br>\n            <b>Skins: </b>${a.skins.length}<br>\n            <b>Digimind: </b>${d}\n            \n            <h5>Stats</h5>\n             <table>\n              <tr>\n                <td><b>${e.hp}: </b>${a.stats.hp}</td>\n                <td><b>${e.pow}: </b>${a.stats.pow}</td>\n                <td><b>${e.hit}: </b>${a.stats.hit}</td>\n              </tr>\n              <tr>\n                <td><b>${e.dodge}: </b>${a.stats.dodge}</td>\n                <td><b>${e.speed}: </b>${a.stats.speed}</td>\n                <td><b>${e.rate}: </b>${a.stats.rate}</td>\n              </tr>\n              <tr>\n                <td><b>${e.armorPiercing}: </b>${a.stats.armorPiercing}</td>\n                <td><b>${e.criticalPercent}: </b>${a.stats.criticalPercent}</td>\n                <td><b>${e.armor}: </b>${c}</td>\n              </tr>\n            </table>\n            \n            <h5>Formation Buff</h5>\n            <div class="row">\n                <div class="col s6">\n                    <table class="tile_grid_table">\n                        <tbody>\n                            <tr>\n                                <td class="${b[6]}"></td> \x3c!-- Tile 7 --\x3e\n                                <td class="${b[7]}"></td> \x3c!-- Tile 8--\x3e\n                                <td class="${b[8]}"></td> \x3c!-- Tile 9 --\x3e\n                            </tr>\n                            <tr>\n                                <td class="${b[3]}"></td> \x3c!-- Tile 4 --\x3e\n                                <td class="${b[4]}"></td> \x3c!-- Tile 5 --\x3e\n                                <td class="${b[5]}"></td> \x3c!-- Tile 6 --\x3e\n                            </tr>\n                            <tr>\n                                <td class="${b[0]}"></td> \x3c!-- Tile 1 --\x3e\n                                <td class="${b[1]}"></td> \x3c!-- Tile 2 --\x3e\n                                <td class="${b[2]}"></td> \x3c!-- Tile 3 --\x3e\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n\n                <div class="col s6">\n                    <p style="margin: 0"><b>Buffs: </b>${a.effect.effectType.toUpperCase()}</p>\n                    ${m}\n                </div>\n            </div>\n        `;!0===n?v.html(u):!0===l?_.html(u):h.html(u)},N=function(t=!1,n=!1){let l=`\n            <b>Name: </b>No Data<br>\n            <b>ID: </b>No Data<br>\n            <b>Type: </b>No Data<br>\n            <b>Rank: </b>No Data<br>\n            <b>BuildTime: </b>No Data<br>\n            <b>Skins: </b>No Data<br>\n            <b>Digimind: </b>No Data\n            \n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>${e.hp}: </b>0</td>\n                <td><b>${e.pow}: </b>0</td>\n                <td><b>${e.hit}: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>${e.dodge}: </b>0</td>\n                <td><b>${e.speed}: </b>0</td>\n                <td><b>${e.rate}: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>${e.armorPiercing}: </b>0</td>\n                <td><b>${e.criticalPercent}: </b>0</td>\n                <td><b>${e.armor}: </b>0</td>\n              </tr>\n            </table>\n            \n            <h5>Formation Buff</h5>\n            <div class="row">\n                <div class="col s6">\n                    <table class="tile_grid_table">\n                        <tbody>\n                        <tr>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n\n                <div class="col s6">\n                    <p style="margin: 0"><b>Buffs: </b>No Data</p>\n                    <p style="margin: 0"><b>Effect: </b>No Data</p>\n                </div>\n            </div>\n        `;!0===t?v.html(l):!0===n?_.html(l):h.html(l)},F=function(){console.log("Save Favorited T-Dolls to Local Storage"),localStorage.setItem("favorite_doll_ids",JSON.stringify(n))},k=function(t){n.includes(t)?M.toast({html:"T-Doll already Favorited",displayLength:2e3,classes:"grey_gfl"}):(n.push(t),F(),T(o,!0),M.toast({html:"T-Doll Favorited",displayLength:2e3,classes:"grey_gfl"}))},x=function(t){if(confirm("Remove this T-Doll?")){for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e,1);F(),T(o,!0),N(!0),M.toast({html:"T-Doll removed from Favorites",displayLength:2e3,classes:"grey_gfl"})}};return{init:function(){let t=localStorage.getItem("favorite_doll_ids");null!==t&&(n=[],n=JSON.parse(t)),T(),T(void 0,!0),N(),N(!0,void 0),N(void 0,!0)},get_dolls_by_type:T,get_dolls_by_buildTime:function(t){try{let e=[];gfcore.dolls.forEach((function(n){n.buildTime===t&&n.id<2e4&&7!==n.rank&&e.push([n.id,n.codename])})),0===e.length&&M.toast({html:"No T-Dolls found with selected Build Time.",displayLength:2e3,classes:"grey_gfl"}),y(e,void 0,!0)}catch(t){console.error("get_dolls_by_buildTime: Failed:",t)}},reset_html_doll_data:N,example:function(){console.log("gfcore",gfcore);const t=gfcore.dolls.find((({codename:t})=>"G36"===t));console.log("Doll G36: ",t)}}}();