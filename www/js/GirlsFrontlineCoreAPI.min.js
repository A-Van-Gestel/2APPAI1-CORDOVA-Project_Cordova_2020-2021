let GirlsFrontlineCoreAPI=function(){const t=["hg","smg","rf","ar","mg","sg"];let e=[],n="",l="",o=$("#tabTDollData"),a=$("#tabBuildTime"),i=$("#tabFavorite"),d=o.find("#tdoll_selection"),s=o.find("#btns_doll_type"),r=o.find("#btnFloat_favorite"),b=i.find("#tdoll_selection_favorite"),c=i.find("#btns_favorite"),f=i.find("#btnFloat_Unfavorite"),m=a.find("#tdoll_BuildTime"),u=a.find("#tdoll_selection_BuildTime"),h=o.find("#Doll_Data"),g=i.find("#Doll_Data_favorite"),p=a.find("#Doll_Data_BuildTime");d.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t))})),s.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),v(e.toLowerCase()),T()})),r.on("click",(function(){let t=d.val();null!==t?N(parseInt(t)):(console.error("Favorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Favorite!",displayLength:2e3,classes:"red accent-4"}))})),b.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t),!0)})),c.children().on("click",(function(){let t=$(this),e=t.data("type");t.siblings().addBack().removeClass("active"),t.addClass("active"),v(e.toLowerCase(),!0),T(!0)})),f.on("click",(function(){let t=b.val();null!==t?k(parseInt(t)):(console.error("UnFavorite Button: "+t+" is NaN!"),M.toast({html:"No T-Doll selected to Unfavorite!",displayLength:2e3,classes:"red accent-4"}))})),m.on("click",(function(){MaterialDateTimePicker.showTimePicker()})),u.on("change",(function(){let t=this.value;""!==t&&D(parseInt(t),void 0,!0)}));let v=function(o="hg",a=!1){try{if(t.includes(o)){let t=[];gfcore.dolls.forEach((function(i){switch(a){case!0:l=o,i.type===o&&e.includes(i.id)&&t.push([i.id,i.codename]);break;default:n=o,i.type===o&&t.push([i.id,i.codename])}})),_(t,a)}}catch(t){console.error("get_dolls_by_type: Failed:",t)}},_=function(t,e=!1,n=!1){let l=void 0;l=!0===e?b:!0===n?u:d,l.empty().append("<option value='' disabled selected>Choose a T-Doll</option>"),t.forEach((function(t){l.append("<option value='"+t[0]+"'>"+t[1]+"</option>")})),$("select").formSelect()},D=function(t,e=!1,n=!1){let l,o=gfcore.dolls.find((({id:e})=>e===t)),a=o.rank;l=7===a?"&#10029;":"&#9733;".repeat(a);let i=o.mindupdate;i=void 0===i?"No":`\n             <table>\n              <tr>\n                <td><b>Mod 1: </b>\n                    <br>Cores: ${o.mindupdate[0].core}\n                    <br>Fragments: ${o.mindupdate[0].mempiece}</td>\n                <td><b>Mod 2: </b>\n                    <br>Cores: ${o.mindupdate[1].core}\n                    <br>Fragments: ${o.mindupdate[1].mempiece}</td>\n                <td><b>Mod 3: </b>\n                    <br>Cores: ${o.mindupdate[2].core}\n                    <br>Fragments: ${o.mindupdate[2].mempiece}</td>\n              </tr>\n            </table>\n        `;let d=new Date(1e3*(o.buildTime-3600)),s=MaterialDateTimePicker.dateTimetoString(d),r=o.stats.armor;void 0===r&&(r=0);let b=`\n            <b>Name: </b>${o.codename}<br>\n            <b>ID: </b>${o.id}<br>\n            <b>Type: </b>${o.type.toUpperCase()}<br>\n            <b>Rank: </b>${l}<br>\n            <b>BuildTime: </b>${s}<br>\n            <b>Skins: </b>${o.skins.length}<br>\n            <b>Digimind: </b>${i}\n            <br>\n            \n            <h5>Stats</h5>\n             <table>\n              <tr>\n                <td><b>HP: </b>${o.stats.hp}</td>\n                <td><b>DMG: </b>${o.stats.pow}</td>\n                <td><b>ACC: </b>${o.stats.hit}</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>${o.stats.dodge}</td>\n                <td><b>MOBILITY: </b>${o.stats.speed}</td>\n                <td><b>ROF: </b>${o.stats.rate}</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>${o.stats.armorPiercing}</td>\n                <td><b>CRIT: </b>${o.stats.criticalPercent}</td>\n                <td><b>ARMOR: </b>${r}</td>\n              </tr>\n            </table>\n        `;!0===e?g.html(b):!0===n?p.html(b):h.html(b)},T=function(t=!1,e=!1){let n='\n                <b>Name: </b>No Data<br>\n                <b>ID: </b>No Data<br>\n                <b>Type: </b>No Data<br>\n                <b>Rank: </b>No Data<br>\n                <b>BuildTime: </b>No Data<br>\n                <b>Skins: </b>No Data<br>\n                <b>Digimind: </b>No Data\n            <br>\n            \n            <h5>Stats</h5>\n             <table style="width:100%">\n              <tr>\n                <td><b>HP: </b>0</td>\n                <td><b>DMG: </b>0</td>\n                <td><b>ACC: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>EVA: </b>0</td>\n                <td><b>MOBILITY: </b>0</td>\n                <td><b>ROF: </b>0</td>\n              </tr>\n              <tr>\n                <td><b>AP: </b>0</td>\n                <td><b>CRIT: </b>0</td>\n                <td><b>ARMOR: </b>0</td>\n              </tr>\n            </table>\n        ';!0===t?g.html(n):!0===e?p.html(n):h.html(n)},y=function(){console.log("Save Favorited T-Dolls to Local Storage"),localStorage.setItem("favorite_doll_ids",JSON.stringify(e))},N=function(t){e.includes(t)?M.toast({html:"T-Doll already Favorited",displayLength:2e3,classes:"grey_gfl"}):(e.push(t),y(),v(l,!0),M.toast({html:"T-Doll Favorited",displayLength:2e3,classes:"grey_gfl"}))},k=function(t){if(confirm("Remove this T-Doll?")){for(let n=0;n<e.length;n++)e[n]===t&&e.splice(n,1);y(),v(l,!0),T(!0),M.toast({html:"T-Doll removed from Favorites",displayLength:2e3,classes:"grey_gfl"})}};return{init:function(){let t=localStorage.getItem("favorite_doll_ids");null!==t&&(e=[],e=JSON.parse(t)),v(),v(void 0,!0),T(),T(!0,void 0),T(void 0,!0)},get_dolls_by_type:v,get_dolls_by_buildTime:function(t){try{let e=[];gfcore.dolls.forEach((function(n){n.buildTime===t&&n.id<2e4&&7!==n.rank&&e.push([n.id,n.codename])})),0===e.length&&M.toast({html:"No T-Dolls found with selected Build Time.",displayLength:2e3,classes:"grey_gfl"}),_(e,void 0,!0)}catch(t){console.error("get_dolls_by_buildTime: Failed:",t)}},reset_html_doll_data:T,example:function(){console.log("gfcore",gfcore);const t=gfcore.dolls.find((({codename:t})=>"G36"===t));console.log("Doll G36: ",t),console.log("Doll G36 Tiles: ",t.effect)}}}();